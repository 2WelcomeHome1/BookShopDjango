# BookShopDjango

**Задача:** Разработать бэкенд для тестового сайта на языке программирования Python, используя фреймворк Django, согласно заданным параметрам. Дополнительно реализовать вывод на фронт часть. Дополнительно упаковать проект в докер контейнер.

В результате выполнения задачи был разработан бэкенда для условного магазина книг. Дополнительно был добавлен вывод на фронтенд без подключения стилизации. Заключительным этапом разрабоатнный проект был упакован в докер контейнер. Контейнер приложен в разделе Release на ГИТ.

![alt text](img/result.png)

## 0. Общие положения
На разработанном сайте реализовано:
- Админ панель. В настройках админ панели добавлена возможноть корректировать исходное кол-во элементов на странице, а так же e-mail получения сообщений. 
- Регистрация и Авторизация пользователей на сайте
- Добавлен дополнительный скрипт, позволяющий выполнять парсинг элементов (книг) с файла json заданной структуры 
- Добавлены категории книг и возможность их настройки. Так же на сайте возможно отсортировать книги по заданной категории
- Добавлена страница детального просмотра элемента(книги)
- Добавлена форма обратной связи. Отчет по форме автоматически формируется в админ панели
- Добавлен поиск книг по названию и автору
- Добавлена возможность пользователю выбирать кол-во книг, отображаемых на странице.

## 1. Настройки приложения

В админ панели в специальном разделе "Page Limiters" администратор может настроить число выводимых объектов на странице, а так же Email адрес получателя сообщения с формы обратной связи.Как представлено на рисунке 1.

![alt text](img/limiters.png)

Рисунок 1. Раздел "Page Limiters"

Дополнительно добавлена защита от добавления большего числа параметров в данную настройку. По умолчанию администратор может добавить только один параметр.

Так же администратор способен выбрать источник получения данных в формате json. Для этого в командной строке в корневой папке проекта необходимо ввести следующую команду:

_**python3 loadbooks.py [OPTION]**_

где параметр [OPTION] - это источник данных в формате json. Если параметр не задан пользователем, то по умолчанию используется следующий адрес: 'https://gitlab.grokhotov.ru/hr/yii-test-vacancy/-/raw/master/books.json'

## 2. Админ панель

В админ панели предусмотрено несколько форм. Форма Applications сохраняет и выводит сообщения, полученные из формы обратной связи. Формы Books & Categorys предназначены для добавления и редактирования книг (в том числе загрузка изображений) и категорий (без возможности настройки вложенных категорий) соответствено. Форма Users необходима для просмотра зарегестрированных пользователей.

![alt text](img/adminpanel.png)

Рисунок 2. Админ Панель

## 3. Форма авторизации и регистрации

На сайте предусмотрена форма авторизации (рис. 3) и регистрации пользователей (рис. 4). Инофрмация о зарегестрированных пользователях сохраняется в базу данных

![alt text](img/login.png)

Рисунок 3. Форма авторизации

![alt text](img/register.png)

Рисунок 4. Форма регистрации

Для входа в админ панель необходимо использовать комбинацию логин:пароль - admin:admin

## 4. Форма обратной связи

На сайте предусмотрена форма обратной связи. Для того, чтобы оставить заявку пользователю необходимо перейти на страницу выбранной книги, и нажать на кнопку "Оставить заявку". В открывшемся окне пользователь может оставить свои контакты для связи (e-mail, phone), и приоложить сообщение к заявке. Все поля подлежат обязательной валидации. Для валидации контактного номена телефона была подключена дополнительная библиотека - django-phone-field.

Отправленные сообщения хранятся в БД и отображаются в админ панели в разделе "Applications".

![alt text](img/form.png)

Рисунок 5. Форма обратной связи

## 5. Парсинг книг из файла

Для выполнения задачи парсинга книг из сайта был разработан модуль loadbooks.py. Как уже было сказано ранее данный модуль автоматически собирает данные из представленного пользователем источника данных. 

При запуске скрипта алгоритм обрабатывает полученные данные и в автоматическом порядке формирует:
Необходимо реализовать:

- Парсинг книг, категорий из источника.
- Изображения к книгам (загружаются в отдельную папку на сервере).

При этом:
- Если выполняется повторный парсинг элементов, то уже существующие данные не дублируются (если появляютсятся новые книги или категории, то парсер автоматически их добавляет)
- Если у товара нет категории, то книга автоматически распределяется в категорию Новинки

## 6. Категории книг
На главной странице сайта отображаются все существующие категории. Все категории кликабельны, и при выборе категории, сайт автоматически покажет книги из выбранной.

![alt text](img/categorys.png)

Рисунок 6. Категории


## 7. Детальный просмотр книг

На сайие реализована возможность детального просмотра книг. В детальном просмотре отображаются:
- Изображение книги
- Название книги
- Категории в которой находится книга (кликабельны)
- Кол-во страниц
- isbn номер как SKU
- Книги из текущей категории(если имеются такие) (В разделе рекомендации)
- Возможность оставить заявку

![alt text](img/bookpage.png)
Рисунок 7. Страница книги

## 8. Поиск книг по названию, автору, статусу
Дополнительно был реализован поиск книг по автору или названию. Поиск в какой-то степени интелектуальный, так как необязательно вводить полное название книги, чтобы найти ее насайте. Достаточно ввести первое слово или фамилию автора. 

![alt text](img/searchresult.png)
Рисунок 8. Результаты поиска

## 9.Докеризация

Заключительным этапом разработанный проект был упакован в докер контейнер. Контейнер приложен в разделе release. Проект запускается на локальной машине. Для запуска достаточно выполнить необходимые миграции и запустить парсер книг для добавления информации на сайт.
